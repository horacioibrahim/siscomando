<!-- polymer project components
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
 -->
<!-- for this components
<link rel="import" href="../app-bar/app-bar.html">-->
<!-- layout
<link rel="import" href="../layouts/drawer-panel-layout.html"> -->

<dom-module id="page-meetings">
  <template>
    <style>
        :host {
            font-family: Roboto;
        }
        paper-toolbar {
            --paper-toolbar-background: #135FB8;
            color: white;
        }
        paper-toolbar .title {
            margin-left: 30px;
        }
        sc-meetings {
            padding-bottom: 62px;
        }
        .float-button {
            position: absolute;
            bottom: 0;
            right: 0;
            margin-right: 16px;
            margin-bottom: 20px;
            width: 56px;
            height: 56px;          
            width: 56dp;
            height: 56dp;
            background-color: #;
            color: white;
            -webkit-border-radius: 50%;
            moz-border-radius: 50%;
            border-radius: 50%;            
            --paper-fab-background: #7ED321;
            --paper-fab-keyboard-focus-background: #417505;
            @apply(--shadow-elevation-8dp);
        }
        iron-icon[icon="cached"] {
            margin-left: 20px;
        }
        paper-badge {
            --paper-badge-margin-bottom: -10px;
            --paper-badge-margin-left: -6px;
        }
    </style>
    <drawer-panel-layout>
          <!-- who is header class -->
          <paper-header-panel class="main">
            <paper-toolbar>
              <paper-icon-button icon="chevron-left" on-tap="_historyBack"></paper-icon-button>
              <!-- <iron-icon icon="menu" ></iron-icon>-->
              <div class="title" id="title">Conversas</div>
              <app-bar class="horizontal layout center end-justified" query="{{q}}" model="users"></app-bar>
              <paper-icon-button on-tap="reload" icon="cached" class="transformed"></paper-icon-button>
            </paper-toolbar>
           <!-- who is content class -->
          <sc-meetings id="meetings" class="shadow-2dp fit" item-key="value._id"></sc-meetings>    
          <paper-fab icon="add" title="Seguir" class="float-button" noink="true" on-tap="toSearch"></paper-fab>          
          </paper-header-panel>
    </drawer-panel-layout>
    <!-- sc-login works as wrapper to check if session (authenticated) -->
    <sc-login id="login" check-only-status></sc-login>
  </template>
  <script>
    Polymer({
      is: 'page-meetings',
      listeners: {
          'nav': 'handleNav'
      },
      ready: function(){
        
      },
      handleNav: function() {
          // todo
      },
      toSearch: function(){
        window.location.href = "#/users/search/?q=";
      },
      reload: function() {
        var scMeetings = this.$.meetings;
        scMeetings.noCache = true;
        scMeetings.loader();
      },
      _historyBack: function() {
        window.location.href = "#/profile";
        // history.back();
      },
      updates: function() {
          // listen
      }
    });
  </script>
</dom-module>
