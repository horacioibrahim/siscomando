<dom-module id="page-login">
    <template>
        <style>
            :host {
                position: absolute;
                width: 100%;
                height: 100%;
                background: #135FB8;
                /* background: linear-gradient(#53A0FD, #135FB8);*/
                color: white;
                font-family: Roboto;
            }
            .container {
                @apply(--layout-vertical);
                height: 100%;
            }
            .container .row:nth-child(1) {
                @apply(--layout-flex-3);
            }
            .container .row:nth-child(2) {
                @apply(--layout-flex-3);
            }
            .container .row:nth-child(3) {
                @apply(--layout-flex-2);
            }            
            .container .row {
                @apply(--layout-flex);
                text-align: center;
                vertical-align: middle;
            }
            .logo {
            }
            .logo img {
                margin-top: 15%;
            }
            .inputs {
                padding: 40px 30px;
                vertical-align: middle;
            }
            .actions {
                margin-top: 20px;
            }
            .actions paper-button {
                width: 80%;
                background: #7ED321;
            }
            paper-input {
                --paper-input-container-focus-color: rgba(255, 255, 255, 0.50);
                --paper-input-container-input-color: #F9F9F9;
            }
            /* file size: 5.5ko | optimized file size: 3.4ko | base64 size: 4.6ko */
            .logo-login-page {
                background-repeat: no-repeat;
                background-position: center; 
                background-image: url(data:image/png;base64,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);
            }
            #alert {
                margin: 0 auto;
                -webkit-transition: opacity 1s ease-in;
                -moz-transition: opacity 1s ease-in;
                -o-transition: opacity 1s ease-in;
                -ms-transition: opacity 1s ease-in;
                transition: opacity 1s ease-in; 
                opacity: 0;
                color: #FFC906;
            }
            #alert.active {
                opacity: 1;
            }
        </style>
        <div class="container">
            <div class="row logo logo-login-page">
            </div>
            <div class="row inputs">
                <paper-input label="e-mail" id="inputUsername">
                  <iron-icon icon="mail" prefix></iron-icon>
                  <div suffix>@serpro.gov.br</div>
                </paper-input>    
                <paper-input label="senha" id="inputPassword" type="password">  
                    <iron-icon icon="communication:vpn-key" prefix></iron-icon>
                     <paper-icon-button suffix on-click="clearInputs" icon="clear" alt="clear" title="clear">
                  </paper-icon-button>
                </paper-input>
            </div>
            <div id="alert" class="">Usuário e/ou senha inválidos.</div>
            <div class="row actions"> 
                <paper-button on-click="send">Entrar</paper-button>
            </div>
        </div>
        <sc-login id="login" url-after-logged="#/home"></sc-login>
    </template>
    <script>
    Polymer({
        is: "page-login",
        ready: function() {
            // SETUP sc-login: 
            // sc-login.has_access_token'; sc-login.is_expired; sc-login.is_valid
            this.$.login.url = siscomando.url.login;
            this.$.login.urlAfterLogged = siscomando.url.home;
            this.$.login.accessTokenField = ['result', 'jsonKey'];
            // this.$.login.accessTokenExpiresAtField = ['result', 'expires_at'];
        },
        clearInputs: function() {
            this.$.inputUsername.value = '';
            this.$.inputPassword.value = '';
        },
        send: function() {
            var self = this;
            var login = this.$.login;
            var username = this.$.inputUsername.value;
            var password = this.$.inputPassword.value;
            var home = siscomando.url.home;
            
            login.addEventListener('sc-login-error', function(evt){
                self.toggleClass("active", true, self.$.alert);
            });
            
            login.addEventListener('sc-login-response', function(evt) {
               // handling returned data specific this app.
               if (evt.detail.response.result.success == "false") {
                 console.log("Invalid login.");
                 sessionStorage.setItem('currentUser', null);
               } else {
                 sessionStorage.setItem('currentUser', JSON.stringify(evt.detail.response));
                 login.goto(home);
               }
            });
            
            login.authenticate(username, password);
        }
    });
    </script>
</dom-module>